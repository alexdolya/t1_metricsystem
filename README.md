# Overview

Реализован функционал отслеживания метрик приложения, отправки их в очередь сообщений (Apache Kafka). 
Микросервис-потребитель сохраняет данные о метрике (метрика, значение, время когда получена метрика) в базу данных.

#### Предоставляются возможность получить следующие метрики:
Все метрики отслеживаются для приложения-продюсера: 
- UPTIME - время работы приложения. Она показывает, сколько времени прошло с момента запуска.
- JVM_MEMORY_MAX - отображает максимальный объем памяти, который может использовать JVM.
- JVM_MEMORY_USAGE - показывает, сколько памяти в данный момент использует JVM.

##### Работа приложения-продюсера:
Автоматически раз в 3 минуты приложение-продюсер отправляет в очередь сообщений данные о 3-х метриках: 
- UPTIME
- JVM_MEMORY_MAX
- JVM_MEMORY_USAGE

С помощью POST /metrics можно,  по запросу пользователя, отправить выбранную метрику в очередь.
#### Open-API: src/main/resources/openapi/api-docs.json

##### Работа приложения-потребителя:
Приложение получает о метриках из очереди и сохраняет их в базу данных.
Присутсвуют следующие методы для взаимодействия:
GET /metrics: Получение списка всех метрик.
GET /metrics/{id}: Получение конкретной метрики по ее идентификатору.
#### Open-API: src/main/resources/openapi/api-docs.json

## Запуск приложения

Запуск Apache Kafka и PostgreSQL происходит в контейнере с помощью docker-compose. Выполните следующие инструкции.

1. Клонируйте репозиторий

2. В терминале перейдите в папку с проектом.

3. В терминале выполните следющую команду
    ```
    docker-compose up
    ```

4. После этого неоходимо выполнить сборку и запуск модулей metrics-producer и metrics-consumer
5. Приложение-продюсер по умолчанию работает на порте 8080, swagger-ui представлен по адресу /swagger-ui/index.html
6. Приложение-потребитель по умолчанию работает на порте 8081, swagger-ui представлен по адресу /swagger-ui/index.html


## Технологии

При разработке использован следующий стэк технологий:
- Java 17
- Spring Boot 3.2.4
- Spring Data JPA
- Spring AOP
- Apache Kafka
- PostgreSQL
- Liquibase
- Lombok
- MapStruct
- OpenAPI
